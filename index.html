<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">

    <title>Program Editor</title>

    <!-- Bootstrap -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
    <link href="https://maxcdn.bootstrapcdn.com/bootswatch/3.3.7/flatly/bootstrap.min.css" rel="stylesheet">
    <!-- favorite options include flatly or solar -->

    <!-- jQuery-UI and Dragula -->
    <link href="./dependencies/jquery-ui/jquery-ui.css" rel="stylesheet">
    <link href="./dependencies/dragula/dragula.css" rel="stylesheet">

    <!-- Styling: Custom -->
    <link href="./styles/main.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css?family=Open+Sans+Condensed:300|Raleway" rel="stylesheet">

  </head>
  <body class="container-fluid">
    <div class="row">
      <header class="col-md-12">
        <h1 class="mainTitle">
          Program Creator/Editor
        </h1>
        <hr />
      </header>
    </div>

    <div id="setupPrompts">
      <!-- TODO: make full length (or at least 1 step per row) -->
      <div class="row">
        <section id="newOrExisting" class="col-md-6 setupStep">
          <p>If you've been here before, you can edit an existing program. Otherwise, start from a new one.</p>
          <button type="button" name="newProg" onclick="createNew()" class="btn btn-success btn-sm">New</button>
          <button type="button" name="existingProg" onclick="editExisting()" class="btn btn-success btn-sm" disabled="true">Existing</button>
        </section>
      </div>
      <div class="row">
        <section id="templateSelector" class="col-md-6 setupStep">
          <p>Select a template to start from.</p>
          <select id="templateSelect" class="form-control" onchange="getConfig(this.value)">
            <option value=""></option>
            <option value="crypto_config.json">Crypto</option>
            <option value="broken.json">Broken</option>
          </select>
        </section>
      </div>
      <div class="row">
        <section id="datePicker" class="col-md-6 setupStep">
          <p>Choose the start and end date for your conference.</p>
          <label for="from">From
            <input type="text" id="from" name="from" />
          </label>
          <label for="to">to
            <input type="text" id="to" name="to" />
          </label>
        </section>
      </div>
      <div class="row">
        <section id="uploadTalks" class="col-md-6 form-group">
          <input type="file" name="acceptedPapers" accept=".json" id="uploadTalks" />
          <button type="submit" name="button" class="btn btn-success btn-sm">Upload</button>
        </section>
      </div>
    </div>

    <main id="parent">
      <div class="col-md-3">
        <h3 class="text-center">
          Talks
        </h3>
      </div>
      <div class="col-md-9">
        <h3 class="text-center">
          Schedule
        </h3>
      </div>

      <!-- TODO: need handlebars template to draw talks -->
      <article id="talks-list" class="col-md-3">
        <h4 class="category-title">
          Theory
        </h4>
        <section class="category" id="category-1">
          <div class="talk" id="21">
            First talk title<br/>
            First talk authors
          </div>
          <div class="talk" id="22">
            Second talk title<br/>
            Second talk authors
          </div>
        </section>

        <h4 class="category-title">
          Number Theory
        </h4>
        <section class="category" id="category-2">
          <div class="talk" id="23">
            Gettysburg Address<br/>
            Abraham Lincoln
          </div>
          <div class="talk" id="24">
            Pithy Monologue<br/>
            Stephen Colbert
          </div>
          <div class="talk" id="25">
            Third talk title<br/>
            Long list of third talk authors
          </div>
          <div class="talk" id="26">
            Fourth talk title<br/>
            Long list of authors
          </div>
        </section>

        <h4 class="category-title">
          Practice
        </h4>
        <section class="category" id="category-3">
          <div class="talk" id="27">
            Fifth talk title<br/>
            Long list of authors
          </div>
          <div class="talk" id="28">
            Sixth talk title<br/>
            Long list of authors
          </div>
          <div class="talk" id="29">
            Seventh talk title<br/>
            Long list of authors
          </div>
          <div class="talk" id="30">
            Eighth talk title<br/>
            Long list of authors
          </div>
          <div class="talk" id="31">
            Ninth talk title<br/>
            Long list of authors
          </div>
          <div class="talk" id="32">
            Tenth talk title<br/>
            Long list of authors
          </div>
        </section>
      </article>

      <article id="renderedProgram" class="col-md-9">
        <!-- Handlebars script that will render the program template based on the program.json file -->
          <script id="program-template" type="text/x-handlebars-template">
            {{#each days}}
              <div class="row">
                <div class="col-md-5">
                 <hr />
                 <h3 class="pageSubtitle">
                   {{date}}
                 </h3>
                </div>
              </div>
              {{#each timeslots}}
                <div class="row">
                  <div class="col-md-2">
                    <p class="timeSlot">
                      {{starttime}}-{{endtime}}
                    </p>
                  </div>
                {{#if twosessions}}
                  <div class="col-md-5">
                    <div class="track1Event panel-body">
                      <h4 class="text-center">
                        {{sessions.0.session_title}}
                      </h4>
                      {{#if sessions.0.location.name.name}}
                        <p class="dualTrackDescr">
                          {{sessions.0.location.name.name}}
                        </p>
                      {{/if}}
                      {{#if sessions.0.moderator}}
                        <p class="dualTrackDescr">
                          {{sessions.0.moderator}}
                        </p>
                      {{/if}}
                      {{#empty sessions.0.talks}}
                        Drag talks to this session.
                      {{#each sessions.0.talks}}
                        <p class="talkTitle">
                          {{title}}
                        </p>
                        <p class="dualTrackDescr">
                          {{#each authors}}
                            <span class="authorName">{{name}}</span>
                          {{/each}}
                        </p>
                      {{/each}}
                      {{/empty}}
                    </div>
                  </div>
                  <div class="col-md-5">
                    <div class="panel-body track2Event">
                      <h4 class="text-center">
                        {{sessions.1.session_title}}
                      </h4>
                      {{#if sessions.1.location.name}}
                        <p class="dualTrackDescr">
                          {{sessions.1.location.name}}
                        </p>
                      {{/if}}
                      {{#if sessions.1.moderator}}
                        <p class="dualTrackDescr">
                          {{sessions.1.moderator}}
                        </p>
                      {{/if}}
                      {{#empty sessions.1.talks}}
                        Drag talks to this session.
                      {{#each sessions.1.talks}}
                        <div class="talk">
                        <p class="talkTitle">
                          {{title}}
                        </p>
                        <p class="dualTrackDescr">
                          {{#each authors}}
                            <span class="authorName">{{name}}</span>
                          {{/each}}
                        </p>
                        </div>
                      {{/each}}
                      {{/empty}}
                    </div>
                  </div>
                {{else}}
         	        <div class="col-md-10">
                    <div class="panel-body mutualEvent">
                      <h4>
                        {{sessions.0.session_title}}
                      </h4>
                      {{#if sessions.0.location.name}}
                        <p class="eventDescr">
                          {{sessions.0.location.name}}
                        </p>
                      {{/if}}
                      {{#if sessions.0.moderator}}
                        <p class="eventDescr">
                          {{sessions.0.moderator}}
                        </p>
                      {{/if}}
                      {{#empty sessions.0.talks}}
                        Drag talks to this session.
                      {{#each sessions.0.talks}}
                        <p class="mutualEventTalkTitle">
                          {{title}}
                        </p>
                        <p class="eventDescr">
                          {{#each authors}}
                            <span class="authorName">{{name}}</span>
                          {{/each}}
                        </p>
                      {{/each}}
                     {{/empty}}
                    </div>
                  </div>
                {{/if}}
                </div>
              {{/each}}
            {{/each}}
          </script>

      </article>
    </main>

    <!-- Bootstrap scripts -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>

    <!-- Handlebars templates -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/handlebars.js/4.0.6/handlebars.js" type="text/javascript"></script>

    <!-- Dependencies (dragula & jquery-UI) -->
    <script src="./dependencies/dragula/dragula.js"></script>
    <script src="./dependencies/jquery-ui/jquery-ui.js"></script>

    <!-- Additional scripts -->
    <script src="./scripts/editor.js"></script>

  </body>
</html>
